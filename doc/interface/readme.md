                                                                                 **接口说明文档**



# 1.基本说明

1.1 接口使用https协议，数据格式为json

1.2 接口地址为前缀为https://39.108.0.107:8443/signClass

1.3 接口调用都会返回status、msg、data参数，接口调用成功后status参数为“0000”，msg参数为“成功”;调用失败status为其他数值，msg参数为失败原因。data参数为具体返回值。以下说明中只描述data参数中的具体数据

1.4 字典表说明

0000 			职务

0001			 性别



# 2.权限接口描述



## 2.1 登录接口

### 2.1.1 地址

 login

### 2.1.2 参数 

| 参数名   | 类型   | 是否必填 | 说明   |
| -------- | ------ | -------- | ------ |
| userName | String | 必填     | 登录名 |
| password | String | 必填     | 密码   |

### 2.1.3 返回值

​    HTTP status 200 成功
​    HTTP status 非200 失败

### 2.1.4 其他说明

​    权限系统使用jwt验证客户权限，调用登录接口成功后，调用其他接口时headers必须使用Authorization参数将token传递后台系统



## 2.2 获取登录用户信息

### 2.2.1 地址 

sys/getUser

### 2.2.2 参数 

无

### 2.2.3 返回值   				 		

| 参数名         | 类型    | 说明           |
| -------------- | ------- | -------------- |
| id             | Long    | 用户id         |
| userName       | String  | 登录名         |
| realName       | String  | 真实姓名       |
| roleName       | String  | 角色名称       |
| roleId         | Long    | 角色Id         |
| roleMemo       | String  | 角色说明       |
| departmentName | String  | 部门名称       |
| departmentId   | Long    | 部门id         |
| isNew          | boolean | 是否第一次登录 |
| positionId     | Long    | 职务ID         |
| positionName   | String  | 职务名称       |
| code           | String  | 人员编号       |
| mobile         | String  | 联系电话       |
| genderId       | Long    | 性别           |
| genderName     | String  | 性别名称       |
| cardNo         | String  | 员工卡号       |

---------------------------------------------------------------------------------------------------

## 2.3 获取用户列表

### 2.3.1 地址 

sys/getUserList

### 2.3.2 参数 

| 参数名       | 类型   | 是否必填 | 说明                     |
| ------------ | ------ | -------- | ------------------------ |
| userName     | String | 非必填   | 登录名   like条件        |
| realName     | String | 非必填   | 真实姓名		like条件 |
| departmentId | Long   | 非必填   | 部门id 		equal条件 |
| roleId       | Long   | 非必填   | 角色Id 		equal条件 |
| pageSize     | int    | 必填     | 分页大小                 |
| pageCount    | int    | 必填     | 当前页数                 |



### 2.3.3 返回值

| 参数名       | 类型   | 说明                          |
| ------------ | ------ | ----------------------------- |
| userName     | String | 登录名                        |
| realName     | String | 真实姓名                      |
| departmentId | Long   | 部门id                        |
| pageSize     | int    | 分页大小                      |
| pageCount    | int    | 当前页数                      |
| data         | []     | 列表数据		数据格式见2.2 |




## 2.4 根据用户名获取用户

### 2.1.1 地址 

sys/getUserByName

### 2.1.2 参数 

| 参数名   | 类型   | 是否必填 | 说明   |
| -------- | ------ | -------- | ------ |
| userName | String | 必填     | 登录名 |

### 2.1.3 返回值

 数据格式见2.2 如用户不存在状态码为 0001



## 2.5 获取所有角色

### 2.5.1 地址 

sys/getRoleList

### 2.5.2 参数 	

无

### 2.5.3 返回值 

[]

| 参数名 | 类型   | 说明 |
| ------ | ------ | ---- |
| id     | Long   | 主键 |
| name   | String | 名称 |
| memo   | String | 备注 |


​	 				

## 2.6 获取部门树

### 2.6.1 地址 

sys/getDepartment

### 2.6.2 参数 

| 参数名 | 类型 | 是否必填 | 说明                      |
| ------ | ---- | -------- | ------------------------- |
| id     | Long | 必填     | 部门id		跟节点id：1 |

### 2.6.3 返回值

| 参数名   | 类型   | 说明                          |
| -------- | ------ | ----------------------------- |
| id       | Long   | 主键                          |
| name     | String | 名称                          |
| memo     | String | 说明                          |
| code     | String | 代码                          |
| parentId | Long   | 父节点ID                      |
| child    | []     | 子节点信息 		数据同上方 |

​		

## 2.7 获取参数

### 2.7.1 地址 

sys/getDictionary

### 2.7.2 参数 	

| 参数名 | 类型   | 是否必填 | 说明     |
| ------ | ------ | -------- | -------- |
| type   | String | 必填     | 参数类型 |

### 2.7.3 返回值

 []

| 参数名 | 类型   | 说明 |
| ------ | ------ | ---- |
| id     | Long   | 主键 |
| name   | String | 名称 |
| memo   | String | 备注 |
| type   | String | 类型 |



## 2.8新增部门

### 2.8.1 地址 

sys/addDepartment

### 2.8.2 参数 

| 参数名   | 类型   | 是否必填 | 说明     |
| -------- | ------ | -------- | -------- |
| parentId | Long   | 必填     | 父节点ID |
| name     | String | 必填     | 名称     |
| memo     | String | 非必填   | 备注     |

### 2.8.3 返回值

| 参数名   | 类型   | 说明     |
| -------- | ------ | -------- |
| id       | Long   | 主键     |
| name     | String | 名称     |
| memo     | String | 说明     |
| code     | String | 代码     |
| parentId | Long   | 父节点ID |



## 2.9新增用户

### 2.9.1 地址 

sys/addUser

### 2.9.2 参数 	

| 参数名       | 类型   | 是否必填 | 说明     |
| ------------ | ------ | -------- | -------- |
| userName     | String | 必填     | 登录名   |
| realName     | String | 必填     | 真实姓名 |
| roleId       | Long   | 必填     | 角色Id   |
| departmentId | Long   | 必填     | 部门id   |
| positionId   | Long   | 必填     | 职务ID   |
| code         | String | 非必填   | 人员编号 |
| mobile       | String | 非必填   | 联系电话 |
| genderId     | Long   | 必填     | 性别ID   |
| cardNo       | String | 非必填   | 员工卡号 |

### 2.9.3 返回值 

数据格式见2.1



## 2.10 当前用户密码是否正确

### 2.10.1 地址 

sys/isPassword

### 2.10.2 参数 	

| 参数参数名名 | 类型类型 | 是否必填 | 说明 |
| ------------ | -------- | -------- | ---- |
| password     | String   | 必填     | 密码 |

### 2.10.3 返回值 

状态码为0000时密码相符



## 2.11 修改密码

### 2.11.1 地址 

sys/changePassword

### 2.11.2 参数 	

| 参数名      | 类型   | 是否必填 | 说明   |
| ----------- | ------ | -------- | ------ |
| password    | String | 必填     | 新密码 |
| oldPassword | String | 必填     | 旧密码 |

### 2.11.3 返回值 

状态码为0000时成功



## 2.12 修改用户信息

### 2.12.1 地址 

sys/updateUser

### 2.12.2 参数 	

| 参数名       | 类型   | 是否必填 | 说明       |
| ------------ | ------ | -------- | ---------- |
| id           | Long   | 必填     | 用户id     |
| realName     | String | 必填     | 真实姓名   |
| roleId       | Long   | 必填     | 角色Id     |
| departmentId | Long   | 必填     | 部门id     |
| positionId   | Long   | 必填     | 职务ID     |
| code         | String | 非必填   | 人员编号   |
| mobile       | String | 非必填   | 联系电话   |
| genderId     | Long   | 必填     | 性别ID     |
| cardNo       | String | 非必填   | 一卡通号码 |

### 2.12.3 返回值 

数据格式见2.2



## 2.13 根据ID获取用户

### 2.13.1 地址 

sys/getUserById

### 2.13.2 参数 	

| 参数名 | 类型 | 是否必填 | 说明   |
| ------ | ---- | -------- | ------ |
| id     | Long | 必填     | 用户id |

### 2.13.3 返回值 

数据格式见2.2



## 2.14 初始化用户密码

### 2.14.1 地址 

sys/initPassword

### 2.14.2 参数 	

| 参数名 | 类型 | 是否必填 | 说明   |
| ------ | ---- | -------- | ------ |
| id     | Long | 必填     | 用户id |

### 2.14.3 返回值 

状态码为0000时成功



# 3 .用户接口描述

## 3.1 手机号是否存在

### 3.1.1 地址

/ps/mobileValid

### 3.1.2 参数

| 参数名 | 类型   | 是否必填 | 说明     |
| ------ | ------ | -------- | -------- |
| mobile | String | 必填     | 手机号码 |

### 3.1.3 返回值

| 参数名 | 类型    | 说明                    |
| ------ | ------- | ----------------------- |
| data   | boolean | true为存在false为不存在 |



## 3.2 客户登录

### 3.2.1 地址

/ps/customLogin

### 3.2.2 参数

| 参数名   | 类型   | 是否必填 | 说明   |
| -------- | ------ | -------- | ------ |
| chatCode | String | 必填     | 微信ID |

### 3.2.3 返回值

状态码为0000时成功，其他为不成功

| 参数名            | 类型   | 说明              |
| ----------------- | ------ | ----------------- |
| id                | Long   | 主键              |
| name              | String | 名称              |
| mobile            | String | 手机号            |
| chatCode          | String | 微信ID            |
| balance           | Double | 剩余金额          |
| frozen            | Double | 冻结金额          |
| regTime           | Date   | 注册时间          |
| status            | int    | 状态 0 有效 1无效 |
| recommendedMobile | String | 推荐人手机号      |



## 3.3  查询客户列表

### 3.3.1 地址

/ps/getCustomList

### 3.3.2 参数

| 参数名    | 类型   | 是否必填 | 说明     |
| --------- | ------ | -------- | -------- |
| mobile    | String | 非必填   | 手机号   |
| pageSize  | int    | 必填     | 分页大小 |
| pageCount | int    | 必填     | 当前页数 |

### 3.3.3 返回值

状态码为0000时成功，其他为不成功

| 参数名    | 类型 | 说明                          |
| --------- | ---- | ----------------------------- |
| pageSize  | int  | 分页大小                      |
| pageCount | int  | 当前页数                      |
| data      | []   | 列表数据		数据格式见3.2 |



## 3.4  充值

### 3.4.1 地址

/ps/recharge

### 3.4.2 参数

| 参数名   | 类型   | 是否必填 | 说明                                                      |
| -------- | ------ | -------- | --------------------------------------------------------- |
| customId | Long   | 必填     | 客户ID                                                    |
| type     | String | 必填     | 充值类型0时长 1天卡 2周卡 3月卡 4季卡 5半年卡 6年卡 7金额 |
| value    | double | 必填     | 当前页数                                                  |

### 3.4.3 返回值

状态码为0000时成功，其他为不成功



## 3.5  增加用户标签

### 3.5.1 地址

/ps/addTag

### 3.5.2 参数

| 参数名   | 类型   | 是否必填 | 说明       |
| -------- | ------ | -------- | ---------- |
| customId | Long   | 必填     | 客户ID     |
| tagId    | Long[] | 必填     | 标签id数组 |

### 3.5.3 返回值

状态码为0000时成功，其他为不成功



## 3.6  删除用户标签

### 3.6.1 地址

/ps/removeTag

### 3.6.2 参数

| 参数名   | 类型   | 是否必填 | 说明       |
| -------- | ------ | -------- | ---------- |
| customId | Long   | 必填     | 客户ID     |
| tagId    | Long[] | 必填     | 标签id数组 |

### 3.6.3 返回值

状态码为0000时成功，其他为不成功





## 3.7 获取用户标签

### 3.6.1 地址

/ps/getTagList

### 3.7.2 参数

| 参数名   | 类型   | 是否必填 | 说明     |
| -------- | ------ | -------- | -------- |
| customId | Long   | 必填     | 客户ID   |
| type     | String | 必填     | 标签类型 |

### 3.7.3 返回值

[]

| 参数名 | 类型   | 说明 |
| ------ | ------ | ---- |
| id     | Long   | 主键 |
| value  | String | 名称 |
| type   | String | 类型 |